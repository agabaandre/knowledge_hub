<!-- Footer opened -->
<div class="main-footer ht-40">
	<div class="container-fluid pd-t-0-f ht-100p">
		<span>Copyright &copy; <?php echo date('Y'); ?><a href="https://www.africacdc.org/">Africa CDC</a> All rights reserved.</span>
	</div>
</div>
<!-- Footer closed -->

<!--Sidebar-right-->
<div class="sidebar sidebar-right sidebar-animate">
	<div class="panel panel-primary card mb-0 rounded-0">
		<div class="tab-menu-heading card-header border-bottom">
			<div class="card-title mb-0">Notifications Of Orders</div>
		</div>
		<div class="">
			<div class="panel panel-primary">
				<div class=" tab-menu-heading">
					<div class="tabs-menu1 ">
						<!-- Tabs -->
						<ul class="nav panel-tabs main-nav-line">
							<li><a href="#orders" class="nav-link active" data-toggle="tab">Recent</a></li>
							<li><a href="#processing" class="nav-link" data-toggle="tab">Processing</a></li>
							<li><a href="#completed" class="nav-link" data-toggle="tab">Completed</a></li>
						</ul>
					</div>
				</div>
				<div class="panel-body tabs-menu-body main-content-body-right">
					<div class="tab-content">
						<div class="tab-pane active" id="orders">
							<div class="main-content-label tx-base mg-b-25">Recent Orders</div>
							<div class="main-media-list-activity">
								<div class="media">
									<div class="media-icon bg-primary">
										<i class="typcn typcn-shopping-cart"></i>
									</div>
									<div class="media-body">
										<h6>Order Verification</h6><span>Product ID: #4521</span>
									</div>
									<div class="media-right">
										2m ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-primary">
										<i class="typcn typcn-shopping-cart"></i>
									</div>
									<div class="media-body">
										<h6>Order Verification</h6><span>Product ID: #4547</span>
									</div>
									<div class="media-right">
										45m ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-primary">
										<i class="typcn typcn-shopping-cart"></i>
									</div>
									<div class="media-body">
										<h6>Order Verification</h6><span>Product ID: #6354</span>
									</div>
									<div class="media-right">
										1 hour ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-primary">
										<i class="typcn typcn-shopping-cart"></i>
									</div>
									<div class="media-body">
										<h6>Order Verification</h6><span>Product ID: #7485</span>
									</div>
									<div class="media-right">
										2 hours ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-primary">
										<i class="typcn typcn-shopping-cart"></i>
									</div>
									<div class="media-body">
										<h6>Order Verification</h6><span>Product ID: #6547</span>
									</div>
									<div class="media-right">
										4 hours ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-primary">
										<i class="typcn typcn-shopping-cart"></i>
									</div>
									<div class="media-body">
										<h6>Order Verification</h6><span>Product ID: #3654</span>
									</div>
									<div class="media-right">
										5 hours ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-primary">
										<i class="typcn typcn-shopping-cart"></i>
									</div>
									<div class="media-body">
										<h6>Order Verification</h6><span>Product ID: #9874</span>
									</div>
									<div class="media-right">
										7 hour ago
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane" id="processing">
							<div class="main-content-label tx-base mg-b-25">Processing Orders</div>
							<div class="main-media-list-activity">
								<div class="media">
									<div class="media-icon bg-pink">
										<i class="typcn typcn-arrow-forward-outline"></i>
									</div>
									<div class="media-body">
										<h6>Orders For Shipment</h6><span>Cleared By: Agent #234</span>
									</div>
									<div class="media-right">
										2m ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-pink">
										<i class="typcn typcn-arrow-forward-outline"></i>
									</div>
									<div class="media-body">
										<h6>Orders For Shipment</h6><span>Cleared By: Agent #354</span>
									</div>
									<div class="media-right">
										30m ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-pink">
										<i class="typcn typcn-arrow-forward-outline"></i>
									</div>
									<div class="media-body">
										<h6>Orders For Shipment</h6><span>Cleared By: Agent #245</span>
									</div>
									<div class="media-right">
										2 hours ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-pink">
										<i class="typcn typcn-arrow-forward-outline"></i>
									</div>
									<div class="media-body">
										<h6>Orders For Shipment</h6><span>Cleared By: Agent #215</span>
									</div>
									<div class="media-right">
										2 hours ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-pink">
										<i class="typcn typcn-arrow-forward-outline"></i>
									</div>
									<div class="media-body">
										<h6>Orders For Shipment</h6><span>Cleared By: Agent #247</span>
									</div>
									<div class="media-right">
										3 hours ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-pink">
										<i class="typcn typcn-arrow-forward-outline"></i>
									</div>
									<div class="media-body">
										<h6>Orders For Shipment</h6><span>Cleared By: Agent #326</span>
									</div>
									<div class="media-right">
										4 hours ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-pink">
										<i class="typcn typcn-arrow-forward-outline"></i>
									</div>
									<div class="media-body">
										<h6>Orders For Shipment</h6><span>Cleared By: Agent #475</span>
									</div>
									<div class="media-right">
										5 hours ago
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-pink">
										<i class="typcn typcn-arrow-forward-outline"></i>
									</div>
									<div class="media-body">
										<h6>Orders For Shipment</h6><span>Cleared By: Agent #324</span>
									</div>
									<div class="media-right">
										5 hours ago
									</div>
								</div>
							</div>
						</div>
						<div class="tab-pane" id="completed">
							<div class="main-content-label tx-base mg-b-25">Completed Orders</div>
							<div class="main-media-list-activity">
								<div class="media">
									<div class="media-icon bg-success">
										<i class="typcn typcn-tick-outline"></i>
									</div>
									<div class="media-body">
										<h6>Successful Purchase</h6><span>Product ID: #3214</span>
									</div>
									<div class="media-right">
										1 hour
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-success">
										<i class="typcn typcn-tick-outline"></i>
									</div>
									<div class="media-body">
										<h6>Successful Purchase</h6><span>Product ID: #1245</span>
									</div>
									<div class="media-right">
										2 hours
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-success">
										<i class="typcn typcn-tick-outline"></i>
									</div>
									<div class="media-body">
										<h6>Successful Purchase</h6><span>Product ID: #4517</span>
									</div>
									<div class="media-right">
										3 hours
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-success">
										<i class="typcn typcn-tick-outline"></i>
									</div>
									<div class="media-body">
										<h6>Successful Purchase</h6><span>Product ID: #3254</span>
									</div>
									<div class="media-right">
										3 hours
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-success">
										<i class="typcn typcn-tick-outline"></i>
									</div>
									<div class="media-body">
										<h6>Successful Purchase</h6><span>Product ID: #1245</span>
									</div>
									<div class="media-right">
										4 hours
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-success">
										<i class="typcn typcn-tick-outline"></i>
									</div>
									<div class="media-body">
										<h6>Successful Purchase</h6><span>Product ID: #1457</span>
									</div>
									<div class="media-right">
										4 hours
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-success">
										<i class="typcn typcn-tick-outline"></i>
									</div>
									<div class="media-body">
										<h6>Successful Purchase</h6><span>Product ID: #4785</span>
									</div>
									<div class="media-right">
										4 hours
									</div>
								</div>
								<div class="media">
									<div class="media-icon bg-success">
										<i class="typcn typcn-tick-outline"></i>
									</div>
									<div class="media-body">
										<h6>Successful Purchase</h6><span>Product ID: #3245</span>
									</div>
									<div class="media-right">
										5 hours
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="card-body border-top">
				<div class="main-content-label tx-base mg-b-25">Cancel Orders</div>
				<div class="main-media-list-activity mg-b-20">
					<div class="media">
						<div class="media-icon bg-danger">
							<i class="typcn typcn-times-outline"></i>
						</div>
						<div class="media-body">
							<h6>Purchase Cancellation</h6><span>Product ID: #3214</span>
						</div>
						<div class="media-right">
							20m ago
						</div>
					</div>
					<div class="media">
						<div class="media-icon bg-danger">
							<i class="typcn typcn-times-outline"></i>
						</div>
						<div class="media-body">
							<h6>Purchase Cancellation</h6><span>Product ID: #4125</span>
						</div>
						<div class="media-right">
							30m ago
						</div>
					</div>
					<div class="media">
						<div class="media-icon bg-danger">
							<i class="typcn typcn-times-outline"></i>
						</div>
						<div class="media-body">
							<h6>Purchase Cancellation</h6><span>Product ID: #7412</span>
						</div>
						<div class="media-right">
							6 hours ago
						</div>
					</div>
					<div class="media">
						<div class="media-icon bg-danger">
							<i class="typcn typcn-times-outline"></i>
						</div>
						<div class="media-body">
							<h6>Purchase Cancellation</h6><span>Product ID: #3241</span>
						</div>
						<div class="media-right">
							8 hours ago
						</div>
					</div>
					<div class="media">
						<div class="media-icon bg-danger">
							<i class="typcn typcn-times-outline"></i>
						</div>
						<div class="media-body">
							<h6>Purchase Cancellation</h6><span>Product ID: #3645</span>
						</div>
						<div class="media-right">
							12 hours ago
						</div>
					</div>
				</div>
				<a class="btn btn-outline-primary btn-block" href="">View All Notifications</a>
			</div>
		</div>
	</div>
</div>
<!--/Sidebar-right-->

<!-- Back-to-top -->
<a href="#top" id="back-to-top"><i class="las la-angle-double-up"></i></a>

<!-- JQuery min js -->
<script src="<?php echo base_url() ?>assets/plugins/jquery/jquery.min.js"></script>

<!-- Popper js -->
<script src="<?php echo base_url() ?>assets/plugins/popper/popper.min.js"></script>

<!-- Bootstrap Bundle js -->
<script src="<?php echo base_url() ?>assets/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Ionicons js -->
<script src="<?php echo base_url() ?>assets/plugins/ionicons/ionicons.js"></script>

<!-- Moment js -->
<script src="<?php echo base_url() ?>assets/plugins/moment/moment.js"></script>

<!-- Sparkline js -->
<script src="<?php echo base_url() ?>assets/plugins/jquery-sparkline/jquery.sparkline.min.js"></script>

<!-- Piety js -->
<script src="<?php echo base_url() ?>assets/plugins/peity/jquery.peity.min.js"></script>

<!-- P-scroll js -->
<script src="<?php echo base_url() ?>assets/plugins/perfect-scrollbar/perfect-scrollbar.min.js"></script>
<script src="<?php echo base_url() ?>assets/plugins/perfect-scrollbar/p-scroll.js"></script>

<!-- Horizontalmenu js-->
<script src="<?php echo base_url() ?>assets/plugins/horizontal-menu/horizontal-menu.js"></script>

<!--- Colorchange js -->
<script src="<?php echo base_url() ?>assets/js/color-change.js"></script>

<!-- Internal Flot js-->
<script src="<?php echo base_url() ?>assets/plugins/jquery.flot/jquery.flot.js"></script>
<script src="<?php echo base_url() ?>assets/plugins/jquery.flot/jquery.flot.pie.js"></script>
<script src="<?php echo base_url() ?>assets/plugins/jquery.flot/jquery.flot.resize.js"></script>
<script src="<?php echo base_url() ?>assets/plugins/jquery.flot/jquery.flot.categories.js"></script>

<!-- Internal Chart js-->
<script src="<?php echo base_url() ?>assets/plugins/chart.js/Chart.bundle.min.js"></script>

<!-- Rating js-->
<script src="<?php echo base_url() ?>assets/plugins/rating/jquery.rating-stars.js"></script>
<script src="<?php echo base_url() ?>assets/plugins/rating/jquery.barrating.js"></script>

<!-- Internal Echart Plugin -->
<script src="<?php echo base_url() ?>assets/plugins/echart/echart.js"></script>

<!-- Tooltip js -->
<script src="<?php echo base_url() ?>assets/js/tooltip.js"></script>

<!-- Internal Index js -->
<script src="<?php echo base_url() ?>assets/js/index.js" id="change-js"></script>
<script src="<?php echo base_url() ?>assets/js/dashboard.sampledata.js"></script>
<script src="<?php echo base_url() ?>assets/js/chart.flot.sampledata.js"></script>

<!-- Right-sidebar js -->
<script src="<?php echo base_url() ?>assets/plugins/sidebar/sidebar.js"></script>
<script src="<?php echo base_url() ?>assets/plugins/sidebar/sidebar-custom.js"></script>

<!-- Custom js -->
<script src="<?php echo base_url() ?>assets/js/custom.js"></script>

<!-- Add Select2 Nodemodules -->
<link href="<?php echo base_url() ?>node_modules/select2/dist/css/select2.min.css" rel="stylesheet" />
<script src="<?php echo base_url() ?>node_modules/select2/dist/js/select2.min.js"></script>

<!-- Add Quil -->
<script src="https://cdn.quilljs.com/1.2.6/quill.min.js"></script>

<!-- Add Sweetalert2 Nodemodule -->
<script src="<?php echo base_url() ?>node_modules/sweetalert2/dist/sweetalert2.all.min.js"></script>

<!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.13.1/b-2.3.3/b-html5-2.3.3/datatables.min.css" /> -->

<script src="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/js/jquery.dataTables.min.js" integrity="sha512-BkpSL20WETFylMrcirBahHfSnY++H2O1W+UnEEO4yNIl+jI2+zowyoGJpbtk6bx97fBXf++WJHSSK2MV4ghPcg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/datatables/1.10.21/css/dataTables.bootstrap.min.css" integrity="sha512-BMbq2It2D3J17/C7aRklzOODG1IQ3+MHw3ifzBHMBwGO/0yUqYmsStgBjI0z5EYlaDEFnvYV7gNYdD3vFLRKsA==" crossorigin="anonymous" referrerpolicy="no-referrer" />


<script>
	$(document).ready(function() {
		$('.select2').select2();
	});
</script>


<!-- Update Tag Script -->
<script>
	$('#edit-tag-modal').on('show.bs.modal', function(event) {
		console.log('Modal Opened');
		var button = $(event.relatedTarget);
		var tagId = button.data('id');
		var tagText = button.data('tag');
		var modal = $(this);
		modal.find('.modal-body #tag_id').val(tagId);
		modal.find('.modal-body #tag_name').val(tagText);
	});
</script>

<!-- Update Author Script -->
<script>
	$('#edit-author-modal').on('show.bs.modal', function(event) {
		console.log('Update Author Modal Opened');
		var button = $(event.relatedTarget);
		var authorId = button.data('id');
		var authorName = button.data('name');
		var authorEmail = button.data('email');
		var authorPhone = button.data('phone');
		var authorAddress = button.data('address');
		var modal = $(this);
		modal.find('.modal-body #id').val(authorId);
		modal.find('.modal-body #name').val(authorName);
		modal.find('.modal-body #email').val(authorEmail);
		modal.find('.modal-body #telephone').val(authorPhone);
		modal.find('.modal-body #address').val(authorAddress);
		// Is organization
		var isOrganization = button.data('isorganization');
		// isOrganization Select
		var isOrganizationSelect = modal.find('.modal-body #is_organization');
		if (isOrganization == 1) {
			isOrganizationSelect.val('1');
		} else {
			isOrganizationSelect.val('0');
		}
	});
</script>

<!-- Script -->
<script>
	// Approve forum modal
	$('#approveForumModal').on('show.bs.modal', function(event) {
		var button = $(event.relatedTarget) // Button that triggered the modal
		var forumId = button.data('forumid') // Extract info from data-* attributes
		var forumTitle = button.data('forumtitle')
		var forumDescription = button.data('forumdescription')
		var modal = $(this)
		modal.find('#forumTitle').html(`<h4>${forumTitle}</h4>`)
		modal.find('#approveForumLink').attr('href', '<?php echo base_url('forums/admin/approve_forum/'); ?>' + forumId)
		modal.find('#forumDescription').html(forumDescription)
	});
</script>


<!-- Datatables -->
<script>
	$(document).ready(function() {
		var authorsTable = $('table#authors-table').DataTable({
			"autoWidth": true,
			buttons: [
				'copy', 'csv', 'excel', 'pdf', 'print'
			],
			exportOptions: {
				columns: [0, 1, 2, 3, 4],

			}
		});


		var exportButton = $('#exportAuthors');

		exportButton.on('click', function() {
			authorsTable.button(1).trigger();
		});

	});
</script>

<!-- Datatables -->


<script>
	$(document).ready(function() {
		var table = $('#publicationTable').DataTable({
			"autoWidth": true,
			"dom": 'bootstrap',
			"buttons": [
				'copy', 'csv', 'excel', 'pdf',
			]
		});


		var filterButton = $('#filterButton');

		var exportButton = $('#exportButton');

		filterButton.on('click', function() {
			var filterTitle = $('#filterTitle').val();
			var filterSource = $('#filterSource').val();

			// Apply both filters
			table.columns(1).search(filterTitle).draw();
			table.columns(2).search(filterSource).draw();
		});

		exportButton.on('click', function() {

			// If filter has value, apply filter to table and export
			if ($('#filterTitle').val()) {
				var filter = $('#filterTitle').val();
				table.search(filter).draw();
				table.button(1).trigger();
			} else {
				table.button(1).trigger();
			}
		});
	});

	var descQuill = new Quill('div#description', {
		theme: 'snow'
	});


	// On Edit Modal Shown Event
	$('#editModal').on('show.bs.modal', function(event) {
		var button = $(event.relatedTarget);
		var id = button.data('id');
		var title = button.data('title');
		var desc = button.data('description');


		var modal = $(this);

		modal.find('.modal-title').text('Update Publication');
		modal.find('#id').val(id);
		modal.find('#title').val(title);
		// modal.find('#desc').val(desc);

		descQuill.setContents(
			[{
				"insert": desc
			}]
		)

		$('#edit-publication-form').on('submit', function(e) {
			e.preventDefault();
			var form = $(this);
			var url = form.attr('action');

			// Add Quill Description to form
			var description = descQuill.root.innerHTML;



			// Append to form
			form.append(`<input type="hidden" name="description" value="${desc}">`);

			$.ajax({
				type: 'POST',
				url: url,
				data: form.serialize(),
				success: function(response) {

					var result = JSON.parse(response);

					if (result.status == 'success') {
						$('#editModal').modal('hide');

						Swal.fire({
							icon: 'success',
							title: 'Success',
							text: 'Publication updated successfully!',
						}).then((result) => {
							if (result.value) {
								location.reload();
							}
						});
					} else {
						$('#editModal').modal('hide');
						Swal.fire({
							icon: 'error',
							title: 'Oops...',
							text: 'Publication update failed!',
						});
					}
				}
			});
		});
	});

	// Sweet Alert Delete Confirmation
	$('#deleteModal').on('show.bs.modal', function(event) {
		var button = $(event.relatedTarget);
		var id = button.data('id');
		var title = button.data('title');
		var modal = $(this);

		modal.find('.modal-title').text('Delete Publication: ' + title);
		modal.find('#delete_id').val(id);

		$('#deleteForm').on('submit', function(e) {
			e.preventDefault();
			var form = $(this);
			var url = form.attr('action');

			$.ajax({
				type: 'POST',
				url: url,
				data: form.serialize(),
				success: function(response) {
					console.log(response);
					Swal.fire({
						title: 'Success!',
						text: 'Publication Deleted Successfully!',
						type: 'success',
						confirmButtonText: 'Ok'
					}).then((result) => {
						if (result.value) {
							window.location.href = '<?php echo base_url('publications'); ?>';
						}
					});
				}
			});
		});
	});
</script>



</body>

</html>